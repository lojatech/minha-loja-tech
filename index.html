<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TechStore - Especialista em Tecnologia</title>

<style>
    /* Estilos Globais */
    *{box-sizing:border-box;font-family:'Segoe UI',sans-serif; touch-action: manipulation;}
    body{margin:0;background:#f4f7f6;padding-top:190px; overflow-x: hidden;}

    header{
     position:fixed;top:0;width:100%;z-index:1000;
     background:#1a1a1a;box-shadow:0 4px 15px rgba(0,0,0,.4);
     padding-bottom: 10px;
    }
    .top-bar{display:flex;justify-content:space-between;align-items:center;padding:10px 20px}
    .logo{color:#fff;font-weight:bold; cursor: pointer; letter-spacing: 1px;}
    .welcome-btn{background:#333;color:#ccc;border:none;padding:8px 15px;border-radius:20px;font-size:11px; cursor:pointer;}

    /* Busca */
    .search-container {
        position: relative;
        width: 92%;
        max-width: 500px;
        margin: 5px auto 10px;
    }
    #searchInput {
        width: 100%;
        padding: 12px 20px 12px 45px;
        border-radius: 25px;
        border: 2px solid transparent;
        font-size: 15px;
        outline: none;
        transition: 0.3s;
        background: #fff;
    }
    #searchInput:focus {
        border-color: #007bff;
        box-shadow: 0 0 10px rgba(0,123,255,0.2);
    }
    .search-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #888;
        font-size: 18px;
    }

    .filter-bar{display:flex;gap:8px;overflow-x:auto;padding:5px 20px; scrollbar-width: none;}
    .filter-bar::-webkit-scrollbar { display: none; }
    .filter-btn{
     background:#333;color:#fff;border:none;padding:8px 18px;
     border-radius:20px;font-size:12px;font-weight:bold; white-space: nowrap; cursor: pointer;
    }
    .filter-btn.active{background:#007bff}

    h2{
     margin:15px 30px 5px;font-size:20px;color:#333;
     border-left:5px solid #007bff;padding-left:10px
    }

    .carousel-container{
     display:grid;
     grid-template-rows:repeat(2,320px);
     grid-auto-flow:column;
     grid-auto-columns:180px;
     gap:12px;
     padding:5px 30px 20px;
     overflow-x:auto;
     scrollbar-width: none;
    }
    .carousel-container::-webkit-scrollbar { display: none; }

    .product-card{
     width:180px;height:330px;background:#fff;border-radius:20px;
     box-shadow:0 5px 15px rgba(0,0,0,.08);
     display:flex;flex-direction:column;position:relative;
     transition: transform 0.2s;
    }

    .img-box{width:100%;height:160px; padding: 10px;}
    .img-box img{width:100%;height:100%;object-fit:contain;border-radius:15px;}

    .badge{
     position:absolute; top:6px; right:6px; background:#e74c3c;
     color:#fff; padding:5px 8px; border-radius:12px;
     font-size:10px; font-weight:bold; text-align:center; max-width:80px; z-index: 10;
    }
    .timer{font-size:9px;margin-top:2px}

    .card-content{text-align:center;padding:10px;flex-grow:1}
    .card-content h3{font-size:14px;margin:0;height:34px;overflow:hidden; color: #333;}
    .price-old{text-decoration:line-through;color:#999;font-size:12px}
    .price{font-size:17px;font-weight:800;color:#27ae60}
    .stock{font-size:12px;font-weight:bold;color:#555;margin-top:4px;}

    .buy-button{
     background:#007bff;color:#fff;border:none;
     padding:12px;width:90%;margin:0 auto 12px;
     border-radius:12px;font-weight:bold;cursor:pointer
    }

    #carrinho-lateral {
        position: fixed; right: -320px; top: 0; width: 300px; height: 100%;
        background: #fff; box-shadow: -5px 0 25px rgba(0,0,0,0.2);
        z-index: 2000; transition: 0.4s;
        display: flex; flex-direction: column;
    }
    #carrinho-lateral.active { right: 0; }
    .cart-header { background: #1a1a1a; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
    .cart-items { flex-grow: 1; overflow-y: auto; padding: 15px; }
    .cart-footer { padding: 20px; border-top: 1px solid #eee; background: #f9f9f9; }
    .cart-item { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    .cart-item img { width: 50px; height: 50px; border-radius: 8px; object-fit: contain; }
    .btn-remove { color: #e74c3c; font-size: 11px; cursor: pointer; border: none; background: none; }
    .btn-checkout { background: #27ae60; color: #fff; border: none; width: 100%; padding: 18px; border-radius: 15px; font-weight: bold; cursor: pointer; }
    .btn-close { background: none; border: none; color: #fff; font-size: 24px; }
    
    #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1500; display: none; }
    #overlay.active { display: block; }
    .hidden{display:none !important}
</style>
</head>
<body>

<header>
 <div class="top-bar">
  <div class="logo" onclick="location.reload()">TECHSTORE</div>
  <button class="welcome-btn" onclick="toggleCart()">üõí Carrinho (<span id="cart-count-badge">0</span>)</button>
 </div>

 <div class="search-container">
    <span class="search-icon">üîç</span>
    <input id="searchInput" placeholder="O que voc√™ procura?" onkeyup="filtrarTexto()">
 </div>

 <div class="filter-bar">
  <button class="filter-btn active" onclick="filtrarMarca('todos',this)">Todos</button>
  <button class="filter-btn" onclick="filtrarMarca('iPhones',this)">iPhone</button>
  <button class="filter-btn" onclick="filtrarMarca('Samsung',this)">Samsung</button>
  <button class="filter-btn" onclick="filtrarMarca('Xiaomi',this)">Xiaomi</button>
  <button class="filter-btn" onclick="filtrarMarca('Motorola',this)">Motorola</button>
  <button class="filter-btn" onclick="filtrarMarca('Acess√≥rios',this)">Acess√≥rios</button>
 </div>
</header>

<div id="vitrine"></div>

<div id="overlay" onclick="toggleCart()"></div>
<div id="carrinho-lateral">
    <div class="cart-header">
        <span>Meu Carrinho</span>
        <button class="btn-close" onclick="toggleCart()">√ó</button>
    </div>
    <div class="cart-items" id="lista-carrinho"></div>
    <div class="cart-footer">
        <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-weight:bold">
            <span>Total:</span>
            <span id="cart-total" style="color:#27ae60; font-size: 18px;">R$ 0,00</span>
        </div>
        <button class="btn-checkout" onclick="irParaPagamento()">FINALIZAR PEDIDO</button>
    </div>
</div>

<script>
const produtos={
 "iPhones":[
  {n:"iPhone 16 Pro Max",p:10499,f:"i16pm.jpg"},
  {n:"iPhone 15 Pro",p:7200,f:"i15p.jpg"},
  {n:"iPhone 14 Pro",p:5800,f:"i14p.jpg"},
  {n:"iPhone 13 Pro Max",p:4900,f:"i13pm.jpg"},
  {n:"iPhone 13",p:3200,f:"i13.jpg"},
  {n:"iPhone 12",p:2800,f:"i12.jpg"},
  {n:"iPhone 7s",p:920,f:"i7s.jpg"},
  {n:"iPhone 11",p:2100,f:"i11.jpg"},
  {n:"iPhone XR",p:1300,f:"ixr.jpg"},
  {n:"iPhone SE 2022",p:1000,f:"ise.jpg"}
 ],
 "Samsung":[
  {n:"Galaxy S24 Ultra",p:7199,f:"s24u.jpg"},
  {n:"Galaxy S23 Ultra",p:5100,f:"s23u.jpg"},
  {n:"Galaxy S22 Ultra",p:3200,f:"s22u.jpg"},
  {n:"Galaxy Z Fold 5",p:8900,f:"fold5.jpg"},
  {n:"Galaxy Z Flip 5",p:3800,f:"flip5.jpg"},
  {n:"Galaxy S24 Plus",p:5200,f:"s24p.jpg"},
  {n:"Galaxy A55",p:1500,f:"a55.jpg"},
  {n:"Galaxy A35",p:1300,f:"a35.jpg"},
  {n:"Galaxy A25",p:1200,f:"a25.jpg"},
  {n:"Galaxy A15",p:1050,f:"a15.jpg"}
 ],
 "Xiaomi":[
  {n:"Xiaomi 14 Ultra",p:8500,f:"x14u.jpg"},
  {n:"Xiaomi 14",p:5200,f:"x14.jpg"},
  {n:"Xiaomi 13T",p:3500,f:"13t.jpg"},
  {n:"Poco F6",p:2700,f:"f6.jpg"},
  {n:"Poco F5",p:2100,f:"f5.jpg"},
  {n:"Redmi Note 13 Pro",p:1800,f:"rn13p.jpg"},
  {n:"Redmi Note 13",p:1400,f:"rn13.jpg"},
  {n:"Redmi 13C",p:950,f:"13c.jpg"},
  {n:"Poco X6 Pro",p:2100,f:"x6p.jpg"},
  {n:"Redmi A3",p:650,f:"ra3.jpg"}
 ],
 "Motorola":[
  {n:"Edge 50 Ultra",p:5400,f:"e50u.jpg"},
  {n:"Razr 50 Ultra",p:6200,f:"razr50.jpg"},
  {n:"Edge 40",p:2100,f:"e40.jpg"},
  {n:"Edge 40 Neo",p:1950,f:"e40n.jpg"},
  {n:"Moto G85",p:1850,f:"g85.jpg"},
  {n:"Moto G73",p:1300,f:"g73.jpg"},
  {n:"Moto G54",p:1200,f:"g54.jpg"},
  {n:"Moto G34",p:1000,f:"g34.jpg"},
  {n:"Moto G24",p:950,f:"g24.jpg"},
  {n:"Moto E13",p:650,f:"e13.jpg"}
 ],
 "Acess√≥rios":[
  {n:"AirPods Pro 2",p:1350,f:"airp.jpg"},
  {n:"Galaxy Watch 7",p:1100,f:"watch7.jpg"},
  {n:"Apple Watch S9",p:1750,f:"aws9.jpg"},
  {n:"Power Bank 10k",p:90,f:"pb.jpg"},
  {n:"Carregador 20W",p:100,f:"car1.jpg"},
  {n:"Capa Silicone",p:35,f:"cap1.jpg"},
  {n:"Pel√≠cula Privativa",p:25,f:"pel.jpg"},
  {n:"Fone Bluetooth",p:95,f:"fonebt.jpg"},
  {n:"Cabo USB-C",p:40,f:"cab1.jpg"},
  {n:"Suporte Veicular",p:65,f:"sup.jpg"}
 ]
};

let carrinho = JSON.parse(localStorage.getItem('carrinhoTechStore')) || [];

function toggleCart() {
    document.getElementById('carrinho-lateral').classList.toggle('active');
    document.getElementById('overlay').classList.toggle('active');
}

function adicionarAoCarrinho(nome, preco, foto) {
    carrinho.push({ n: nome, p: preco, f: foto });
    atualizarCarrinho();
    if(!document.getElementById('carrinho-lateral').classList.contains('active')) toggleCart();
}

function removerItem(index) {
    carrinho.splice(index, 1);
    atualizarCarrinho();
}

function atualizarCarrinho() {
    const lista = document.getElementById('lista-carrinho');
    const totalEl = document.getElementById('cart-total');
    const badge = document.getElementById('cart-count-badge');
    localStorage.setItem('carrinhoTechStore', JSON.stringify(carrinho));
    badge.innerText = carrinho.length;

    if (carrinho.length === 0) {
        lista.innerHTML = '<p style="text-align:center; color:#999; margin-top:50px;">Vazio</p>';
        totalEl.innerText = 'R$ 0,00';
        return;
    }
    lista.innerHTML = '';
    let total = 0;
    carrinho.forEach((item, index) => {
        total += parseFloat(item.p);
        lista.innerHTML += `
            <div class="cart-item">
                <img src="${item.f}" onerror="this.src='https://via.placeholder.com/50'">
                <div class="cart-item-info">
                    <h4>${item.n}</h4>
                    <p>R$ ${formatar(parseFloat(item.p))}</p>
                    <button class="btn-remove" onclick="removerItem(${index})">Remover</button>
                </div>
            </div>`;
    });
    totalEl.innerText = `R$ ${formatar(total)}`;
}

function irParaPagamento() {
    if(carrinho.length === 0) return alert("Vazio!");
    window.location.href = 'pagamento.html';
}

let tempo=(2*24*3600)+(14*3600)+(27*60)+50;
function textoTempo(){
 let d=Math.floor(tempo/86400), h=Math.floor((tempo%86400)/3600), m=Math.floor((tempo%3600)/60), s=tempo%60;
 return `${d}d ${h}h ${m}m ${s}s`;
}
setInterval(()=>{
 tempo--; if(tempo<=0) tempo=232070;
 document.querySelectorAll('.timer').forEach(t=>t.innerText=textoTempo());
},1000);

function formatar(v){ return v.toLocaleString('pt-BR',{minimumFractionDigits:2}); }

function precoFinal(p){ 
    // Somente aparelhos de R$ 5.000,00 para cima recebem o desconto
    if(p >= 5000) {
        // Gera um valor entre 3250 e 4000 baseado no pre√ßo original
        return 3250 + (p % 751); 
    }
    return p;
}

function renderizar(){
 let html='';
 for(let cat in produtos){
  html+=`<div class="category-section" id="cat-${cat}"><h2>${cat}</h2><div class="carousel-container">`;
  produtos[cat].forEach(p=>{
   let novo=precoFinal(p.p), desc=novo!==p.p, fURL=`fotos/${p.f}`;
   let estoqueQtd = Math.floor(Math.random() * 12) + 1;
   html+=`
   <div class="product-card" data-name="${p.n.toLowerCase()}">
    <div class="img-box"><img src="${fURL}" onerror="this.src='https://via.placeholder.com/150'"></div>
    ${desc?`<div class="badge">OFERTA<div class="timer">${textoTempo()}</div></div>`:''}
    <div class="card-content">
     <h3>${p.n}</h3>
     ${desc?`<div class="price-old">R$ ${formatar(p.p)}</div><div class="price">R$ ${formatar(novo)}</div>`:`<div class="price">R$ ${formatar(p.p)}</div>`}
     <div class="stock">Estoque: ${estoqueQtd} un.</div>
    </div>
    <button class="buy-button" onclick="adicionarAoCarrinho('${p.n}','${novo}','${fURL}')">Comprar</button>
   </div>`;
  });
  html+='</div></div>';
 }
 document.getElementById('vitrine').innerHTML=html;
}

function filtrarMarca(m,b){
 document.getElementById('searchInput').value = ""; 
 document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));
 b.classList.add('active');
 document.querySelectorAll('.category-section').forEach(s=>{
  if(m==='todos') s.classList.remove('hidden');
  else s.id==='cat-'+m ? s.classList.remove('hidden') : s.classList.add('hidden');
 });
}

function filtrarTexto(){
 let t=document.getElementById('searchInput').value.toLowerCase();
 document.querySelectorAll('.category-section').forEach(section => {
    let cards = section.querySelectorAll('.product-card');
    let temResultadoNaSecao = false;
    cards.forEach(card => {
        if(card.dataset.name.includes(t)) {
            card.style.display = 'flex';
            temResultadoNaSecao = true;
        } else {
            card.style.display = 'none';
        }
    });
    if (t === "") {
        let filtroAtivo = document.querySelector('.filter-btn.active').innerText;
        if(filtroAtivo === "Todos" || section.querySelector('h2').innerText === filtroAtivo) {
            section.classList.remove('hidden');
        }
    } else {
        if(temResultadoNaSecao) section.classList.remove('hidden');
        else section.classList.add('hidden');
    }
 });
}

renderizar();
atualizarCarrinho();

// Bloqueio extra via JavaScript para navegadores que ignoram a meta tag
document.addEventListener('touchstart', function (event) {
  if (event.touches.length > 1) {
    event.preventDefault();
  }
}, { passive: false });

document.addEventListener('gesturestart', function (event) {
  event.preventDefault();
});
</script>
</body>
</html>
